!function(e){var r,t,n=!1,f=!1,i=!1,o=!1,u=!1,a=!1,s=!1,c=!1,h=[],p=[],l=[],d={},v=[];e[23]=function(e){if(void 0===b)var b=!1;if(r=e[0]||b,n=e[1]||!1,f=e[2]||!1,(i=e[9]||!1)&&v.push(i),o=e[5]||!1,u=e[6]||!1,a=e[7]||!1,s=e[8]||!1,e[3]){c=!0;for(m=0;m<e[3].length;m++)"regex"===e[3][m][0]?(l.push([e[3][m][2],e[3][m][3],e[3][m][1]]),e[3][m][4]&&(d[e[3][m][0]]=e[3][m][4],-1===v.indexOf(e[3][m][4])&&v.push(e[3][m][4]))):(h.push(e[3][m][0]),p.push(e[3][m][1]),e[3][m][4]&&(d[e[3][m][0]]=e[3][m][4],-1===v.indexOf(e[3][m][4])&&v.push(e[3][m][4])));t=e[4]||!1}if(0===v.length)v=!1;else for(var O=v.length,m=0;m<O;m++)v[m]=g(v[m])};var b={Element:"undefined"!=typeof Element&&Element,Document:"undefined"!=typeof Document&&Document},O={append:{},insert:{}};for(var m in b)b.hasOwnProperty(m)&&b[m]&&(O.append[m]=b[m].prototype.appendChild,O.insert[m]=b[m].prototype.insertBefore);var y=document.createElement("a");y.href=document.location.href;var g=function(e){var r=document.createElement("a");return r.href=e,r},j=function(e,t){return"css"===t?r.replace("{PROXY:URL}",escape(e)).replace("{PROXY:TYPE}",escape(t)):"js"===t?r.replace("{PROXY:URL}",escape(e)).replace("{PROXY:TYPE}",escape(t)):void 0},x=function(r,n){if(c){var f=h.indexOf(r);if(f>-1)var i=p[f];else if(l.length>0)for(var o,u,a=l.length,s=0;s<a;s++){u=!1;try{o=new RegExp(l[s][0],l[s][1]||"")}catch(e){u=!0}if(!u&&o.test(r)){l[s][2]?i=l[s][2]:l[s][3]&&(r=l[s][3]);break}}if(i){if(void 0!==d[r])v=d[r];else var v=t;v+=i.substr(0,2)+"/",v+=i.substr(2,2)+"/",v+=i.substr(4,2)+"/",v+=i;if("js"===n){if(v+=".js",void 0!==e[20]){var b=g(v).href;v=e[20](b)}}else"css"===n&&(v+=".css");return v}}if("js"===n&&void 0!==e[20]){var O=g(r).href;if((r=e[20](O))!==O)return r}return j(r,n)},P=function(e,r){var t="object"==typeof e&&void 0!==e.href?e:g(e);if("blob:"===t.protocol)return!1;if(v&&!0!==r)for(var n=v.length,f=0;f<n;f++)if(-1!==t.href.indexOf(v[f].href))return!1;return t.host!==y.host},C=function(e){var r="object"==typeof e&&void 0!==e.href?e:g(e);if("blob:"===r.protocol)return!0;if(o){for(var t=!1,n=o.length,f=0;f<n;f++)if(-1!==r.href.indexOf(o[f])){t=!0;break}if(!t)return!0}if(u)for(var n=u.length,f=0;f<n;f++)if(-1!==r.href.indexOf(u[f]))return!0;return!1},E=function(e){var r="object"==typeof e&&void 0!==e.href?e:g(e);if("blob:"===r.protocol)return!1;if(v)for(var t=v.length,n=0;n<t;n++)if(-1!==r.href.indexOf(v[n].href))return!1;return r.host!==y.host},R=function(e){var r="object"==typeof e&&void 0!==e.href?e:g(e);if("blob:"===r.protocol)return!0;if(a){for(var t=!1,n=a.length,f=0;f<n;f++)if(-1!==r.href.indexOf(a[f])){t=!0;break}if(!t)return!0}if(s)for(var n=s.length,f=0;f<n;f++)if(-1!==r.href.indexOf(s[f]))return!0;return!1},w=function(r){if(r.nodeName)if("SCRIPT"===r.nodeName.toUpperCase()){if(!n)return!1;if(r.hasAttribute("data-abtf"))return!1;if(r.src){t=g(r.src);if(C(t))return!1;if(!P(t)){if(void 0!==e[20]){if("blob:"===t.protocol)return!1;url=e[20](t.href),url!==t.href&&(r.src=url)}return!1}return"js"}}else if("LINK"===r.nodeName.toUpperCase()&&"stylesheet"===r.rel.toLowerCase()){if(!f)return!1;if(r.hasAttribute("data-abtf"))return!1;if(r.href){var t=g(r.href);return!R(t)&&(!!E(t)&&"css")}}return!1},Y=function(e){var r=w(e);if(!r)return!1;var t=g("css"===r?e.href:e.src).href,n=x(t,r);"css"===r?e.href=n:"js"===r&&(e.src=n)},B={appendChild:function(e,r){return Y(r),O.append[e].call(this,r)},insertBefore:function(e,r,t){return Y(r),O.insert[e].call(this,r,t)}};for(var m in b)b.hasOwnProperty(m)&&b[m]&&function(e){b[e].prototype.appendChild=function(r){return B.appendChild.call(this,e,r)},b[e].prototype.insertBefore=function(r,t){return B.insertBefore.call(this,e,r,t)}}(m);e[24]=function(e){return P(e,!0)?j(e,"js"):e}}(window.Abtf);